<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprSonicFallingEnding</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>4</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>objCharacterFall</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>
state=0;
if objGameData.character_id[0] == 1 {
    sprite_index=sprSonicFallingEnding;
} else if objGameData.character_id[0] == 2 {
    sprite_index=sprTailsFallingEnding;
} else {
    sprite_index=sprKnucklesFallingEnding;
}
image_speed = 0;
view_xview = x-view_wview*.5;
view_yview = y-view_hview*.5-310;

// "bad" "noemeralds" "nostones" "good"
music = bgmEndingBad;
alarm[1] = 1;
if objProgram.special_future_current_level &gt;= 7 &amp;&amp; objProgram.special_past_current_level &gt;= 7 {
    endType = "good";
    music = bgmEndingGood;
        if objGameData.character_id[0] == 1 {
            instance_create(1856,496,objGalanikFloat);
            sprite_index = sprSuperSonicStar;
            x = 2000;
            y =468;
            image_xscale = .0825;
            image_yscale = .0825;
            depth = 4;
            state = 18;
        }
} else if objProgram.special_future_current_level &gt;= 7 {
    endType = "nostones";
        if objGameData.character_id[0] == 1 {
            instance_create(1856,496,objGalanikFloat);
            sprite_index = sprSuperSonicStar;
            x = 2000;
            y =468;
            image_xscale = .0825;
            image_yscale = .0825;
            depth = 4;
            state = 18;
        }
}  else if objProgram.special_past_current_level &gt;= 7 {
    endType = "noemeralds";
}  else {
    endType = "bad";
}
if sprite_index != sprSuperSonicStar
    gravity=0.015;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>audio_play_sound(music,20,false);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// null counter
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>switch state {
case 0:
if gravity != 0 {
    if sprite_index != sprSuperSonicFallingEnding {
        image_xscale-=.00125;
        image_yscale-=.00125;
    } else {
        image_xscale-=.00044;
        image_yscale-=.00044;
   }
} else if sprite_index != sprSuperSonicFallingEnding {
    image_xscale=1;
    image_yscale=1;
}
if view_xview &lt;= 0 {
    alarm[0] = 120;
    state = 1;
    view_xview = 0;
}
if  abs(view_xview - abs(x-view_wview*.5)) &gt; 16 || abs(view_yview - abs(y-view_hview*.5-16)) &gt; 16 {
    if view_xview+view_wview*0.5 &gt; x {
        view_xview -=8;
    }
    if view_xview+view_wview*0.5 &lt; x {
        view_xview +=8;
    }
    if view_yview+view_hview*0.5 &gt; y {
        view_yview -=8;
    }
    if view_yview+view_hview*0.5 &lt; y {
        view_yview +=8;
    }
} else {
    view_xview = x-view_wview*.5;
    view_yview = y-view_hview*.5-16;
}
    /*if view_xview &gt; 0 {
        view_xview = x-view_wview*.5;
        view_yview = y-view_hview*.5-16;
    } else {
        view_xview = 0;
        alarm[0] = 120;
        state = 1;
    }*/
break;
case 1:
    if alarm[0] == -1 {
    
     if endType == "nostones" {
        viewTop = 1810;
    } else  {
        viewTop = 1780;
    }
        if view_yview &gt; viewTop{
            view_yview -=2;
        } else {
        
            if endType == "bad" || endType == "noemeralds" {
                with objNeverLakeEnding badFade = .0125;
            }
            state = 2;
            alarm[0] = 90;
        }
    }
break;
case 2:
    if alarm[0] == -1 {
        if endType == "bad" || endType == "noemeralds" {
            instance_create(270,1870,objGalanikBadEnding);
            alarm[0]=60;
        }
        state = 3;
    }
break;
case 3:
    instance_create(x,y,objTextEnding);
    if alarm[0] == - 1 {
        if endType == "bad" || endType == "nostones" {
            with objTextEnding state = 1;
            with objMusic {
                audio_sound_gain(currentMusic,0,500);
            }
        }
        state = 4;
        alarm[0]=120;
    }
break;
case 4:
    if alarm[0] == - 1 {
        if endType == "bad"  {
            state = 12;
            alarm[0] = 500;
        } else if endType == "nostones" {
            state = 12;
            alarm[0] = 500;
       
        } else {
            instance_create(-28,1948,objPlaneRestoreFinal);
            state = 5;
        }
    }
break;
case 5:
    with objPlaneRestoreFinal {
        if x &gt; 213 {
            instance_create(248,1944,objTLPRestoreEnding);
            other.alarm[0] = 500;
            
            other.state = 6;
            hsp = 0;
        }
    
    }
break;
case 6:
    if alarm[0] == -1 {
        if endType == "noemeralds" {
            with objTextEnding state = 1;
            state = 12;
            alarm[0] = 500;
            
            with objMusic {
                audio_sound_gain(currentMusic,0,500);
            }
            
        } else {
            with objTextEnding state = 2;
            alarm[0] = 800;
            state = 7;
        }
    with objPlaneRestoreFinal { hsp = .5; }
    }
break;
case 7:
    if alarm[0] == -1 {
        state = 8;
        with objMusic {
            audio_sound_gain(currentMusic,0,500);
        }
        with objTextEnding instance_destroy();
        with objAmyEnding visible = true;
        instance_create(208,2880,objMetalElectric);
    }
break;
case 8:
    if view_yview &lt; 2760 {
        view_yview += 2;
    } else {
        view_yview = 2760
        state = 9;
        alarm[0] = 500;
    }
break;
case 9:
    if alarm[0] == 0 { audio_play_sound(sndMetalPowerdown,1,false); }
    if alarm[0] == -1 {
        with objMetalElectric {
            blackFade +=.0125;
            if blackFade &gt; 1.9 {
                eyeFade -=.0125;
                
                if eyeFade &lt; 0 {
                    other.alarm[0] = 250;
                    other.state = 12;
                }
            }
        }
    }
break;
case 12:
    if input_check_pressed(cACTION) || input_check_pressed(cSTART) {
        objEasyAsyncController.do_save = false;
        game_restart();
    }
    
    if alarm[0] == -1 {
        objEasyAsyncController.do_save = false;
        game_restart();
    }
break;
case 18: // Super Sonic intro start
if !instance_exists(objFinalEnding) {
    if image_xscale == .0825 {
        audio_play_sound(sndSSTwinkle,1,false);
    }
    if image_xscale &lt; .75 {
            image_xscale += .0525;
        image_yscale += .0525;
    } else {
        state = 19;
    }
}
break;
case 19:
    if image_xscale &gt; .0825 {
        image_xscale -= .0525;
        image_yscale -= .0525;
    } else {
        y=472;
        state = 20;
    }
break;
case 20: 
if !instance_exists(objFinalEnding) {
    sprite_index = sprSuperSonicFallingEnding;
    x = 2000;
    image_xscale = .0825;
    image_yscale = .0825;
    depth = 4;
    state = 21;
    
}
break;
case 21:
    x-=6;
    image_xscale+=.00825;
    image_yscale+=.00825;
    with objGalanikFloat{
       // if image_index == 1 &amp;&amp; !audio_is_playing(sndGalanikDeathScreech)
    }
    if x &lt;= 1845 {
        with objGalanikFloat{
            image_index = 1;
        }
    }
    
    if x &lt;= 1849 {
        with objGalanikFloat image_index = 2;
    }
    
    if x &lt;= 1853 {
        with objGalanikFloat image_index = 3;
        if depth != -1 {
            audio_play_sound(sndFinalGalacnikHit,1,false);
        }
        depth = -1;
    }
    
    if x &lt;= 1857 {
        with objGalanikFloat {
            image_index = 4;
        }
    } 
   if x &lt; 1624 {
        state = 22;
        //x = 1868;
        //y = 544;
       // gravity=0.015;
    }
break;
case 22:
    with objGalanikFloat {
        if !instance_exists(objEndingExplode)
        instance_create(x,y-24,objEndingExplode);
    }
    //state = 0;
   /* if view_yview &lt; y-view_hview*.5-16{
        view_yview += 4;
    }  else {
        state = 0;
        objCarh
    }*/
break;
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Stop all Music if ended
with objMusic {
    if audio_sound_get_gain(currentMusic) &lt;= .1 
        stop_all_music(false);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="objBiPlane">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if gravity != 0 {
    other.hsp=-1;
    image_index=1;
    gravity=0;
    instance_create(x,y,objCredits);
    image_xscale = 1;
    image_yscale = 1;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if objProgram.special_future_current_level &gt;= 7 &amp;&amp; objGameData.character_id[0] = 1 {
    draw_sprite_ext(sprite_index,image_index,x+7,y-15+sin(objScreen.image_index/32),image_xscale,image_yscale,0,c_white,1);
} else {
    draw_sprite_ext(sprite_index,image_index,x+7,y,image_xscale,image_yscale,0,c_white,1);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
