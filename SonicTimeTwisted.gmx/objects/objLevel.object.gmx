<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>0</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Initialize level
image_speed = 0;
// timing
timer = 0;
timer_enabled = false;
stage_timer_active = false;
reseting = 0;
// state
started = false;
cleared = false;
// players
player[0] = noone;
player[1] = noone;
// other
total_rings = instance_number(objRing);
// custom data
act = 1;
flower = sprExampleFlower;
spawn_id = noone;
ringLifeCounter = 0; 
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if objProgram.temp_spawn_tag&gt;-1
{
    objProgram.temp_spawn_tag = -1;
    objProgram.temp_spawn_time = -1;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var xran =random(104)-52;
var yran =random(97)-48;
instance_create(x+xran+40,y+yran,objExplosionCluster);
alarm[4]=4;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Scene culling
if objProgram.paused or objProgram.lost_focus exit;
// Cull instances
with objSceneObject if (remove==1) instance_deactivate_object(self);
// Activate instances onscreen
with objCamera instance_activate_region(view_xview-48, view_yview-48, view_wview+96, view_hview+96, true);
// Activate surrounding instances offscreen
with objPlayer {if offscreen_enabled and instance_exists(camera) and not in_view(camera.view_id, 48) instance_activate_region(x-(offset_y*2)-abs(xspeed), y-(offset_y*2)-abs(yspeed), (offset_y*4)+abs(xspeed*2), (offset_y*4)+abs(yspeed*2), true);}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Run timers
if objProgram.paused or objProgram.lost_focus exit;
// stage timer
stage_timer_active = objGameData.timeout and timer_enabled and started and !cleared and !objProgram.cutscene;
if stage_timer_active {if timer timer -= 1;}
// reset timer
if reseting
{
    reseting -= 1;
    if not reseting
    {
        if instance_exists(objCutscene) transition_to(objFade, room, 24); 
        else {
            transition_to(objTitlecardDisolve, room, 0);
            //play_music_intro(objMusic.musicIntroAsset,0);
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Pausing
if started and not instance_exists(objTransition) and input_check_pressed(cPAUSE) {
    if not objProgram.paused {
        objProgram.paused = true;
        game_pause(objProgram.paused);
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// stop audio
stop_all_music(false);
audio_stop_all();
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// End level
// free particle system
part_system_destroy(particles);
// reset global data
if cleared
{
    // spawn position
    objProgram.spawn_tag = 0;
    objProgram.spawn_time = 36000;
    objProgram.temp_spawn_tag = -1;
    objProgram.temp_spawn_time = -1;
    objProgram.cutscene = false;
    
    if ds_exists(objProgram.life_future_list,ds_type_list) {
        ds_list_destroy(objProgram.life_future_list);
        ds_list_destroy(objProgram.ring_future_list);
    }
        
    if ds_exists(objProgram.life_past_list,ds_type_list) {
        ds_list_destroy(objProgram.life_past_list);
        ds_list_destroy(objProgram.ring_past_list);
    }
    
    // rings
    objGameData.rings[0] = 0;
    objGameData.rings[1] = 0;
    
    // destory objLevel since it persists
    instance_destroy();
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Start level
var local_id;
spawn_id = noone;
// go through spawn points
for (var i=0; i&lt;instance_number(objStart); i+=1)
{
    // get spawn position
    local_id = instance_find(objStart, i);
    // set as spawn point if matching tag
    if objProgram.temp_spawn_tag&gt;-1 {
    
         if (local_id.tag==objProgram.temp_spawn_tag) {
            spawn_id = local_id; 
            break;
         }
         
     }
    else if (local_id.tag==objProgram.spawn_tag) {
        spawn_id = local_id; 
        break;
    }
}
// setup spawn
if spawn_id&gt;-1
{
    // reset time
    if objProgram.temp_spawn_tag&gt;-1 timer = objProgram.temp_spawn_time; else
    timer = objProgram.spawn_time;
    // handle time travel
    if objProgram.time_traveling!=0
    {
        // evaluate existing players
        player[0] = instance_find(objPlayer, 0);
        player[0].x = spawn_id.x;
        player[0].y = spawn_id.y+1;
        
        if objGameData.character_id[0] == 2
            player[0].y = spawn_id.y+2;
            
        with objPlayer player_is_entering();
    }
    else
    {
        // add player(s)
        player[0] = instance_create(spawn_id.x, spawn_id.y+1, objPlayer);
        if objGameData.character_id[0] == 2
            player[0].y = spawn_id.y+2;
        
        if objProgram.temp_spawn_tag == 0 {
            view_xview = player[0].x-213
            view_yview = player[0].y-120
        }
    }
    
    with player[0].camera {
        bottom = other.spawn_id.bottom;
        top = other.spawn_id.top;
        left = other.spawn_id.left;
        right = other.spawn_id.right;
    
    }
    
    // run start script
    if spawn_id.start_script != noone
        script_execute(spawn_id.start_script);
    
}
// reset temporary data
objProgram.time_traveling = 0;
alarm[1]=1;
objProgram.level = room;
// create particle system
particles = part_system_create();

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// set up watchers for lives and big rings
if objProgram.in_past &amp;&amp; !ds_exists(objProgram.ring_past_list, ds_type_list){
    objProgram.life_past_list = ds_list_create();
    objProgram.ring_past_list = ds_list_create();
    
    } else if !ds_exists(objProgram.ring_future_list, ds_type_list) {
    
        objProgram.life_future_list = ds_list_create();
        objProgram.ring_future_list = ds_list_create();
     
}
if objProgram.in_past {
    /* big ring past */
    /*for (var i=0; i&lt;instance_number(objRingGiant); i+=1){
        local_id = instance_find(objRingGiant, i);
        
        if ds_list_find_index(objProgram.ring_past_list, local_id.tag) &gt; -1 {
        
            with local_id { reaction_script = noone; visible = false;}
        
        } 
    }*/
    
   /* for (var i=0; i&lt;instance_number(objMonitor); i+=1){
        local_id = instance_find(objMonitor, i);
        
        if ds_list_find_index(objProgram.life_past_list, local_id) &gt; -1 {
        
            with local_id { instance_destroy(); }
        
        } 
    }*/
} else {
    /* big ring future */
  /*for (var i=0; i&lt;instance_number(objRingGiant); i+=1){
        local_id = instance_find(objRingGiant, i);
        
        if ds_list_find_index(objProgram.ring_future_list, local_id.tag) &gt; -1 {
        
            with local_id { reaction_script = noone; visible = false; }
        
        } 
    }*/
    
   /* for (var i=0; i&lt;instance_number(objMonitor); i+=1){
        local_id = instance_find(objMonitor, i);
        
        if ds_list_find_index(objProgram.life_future_list, local_id) &gt; -1 {
        
            with local_id { instance_destroy(); }
        
        } 
    }*/
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///set animations for level start
with player[0] {
    if other.spawn_id.tag == 0
        switch room {
        
        case AA1_f:
        
            animation_new ="idle";
        
        break;
        
        case AA1_p:
        
            animation_new ="idle";
        
        break;
        
                case AA2_f:
        
            animation_new ="idle";
        
        break;
        
        case AA2_p:
        
            animation_new ="idle";
        
        break;
        
         case RR1_f:
        
            animation_new ="spin";
            start_rr1();
            
        break;
        
        case RR1_p:
        
            animation_new ="spin";
            start_rr1();
            
        break;
        
        case RR2_f:
        
            animation_new ="level_start";
            
        break;
        
        case RR2_p:
        
            animation_new ="level_start";
            
        break;
        
        case FF1_f:
        
            animation_new ="idle";
            
        break;
        
        case FF1_p:
        
            animation_new ="idle";
            
        break;
        
        case FF2_f:
        
            animation_new ="level_start";
            
        break;
        
        case FF2_p:
        
            animation_new ="level_start";
            
        break;
        
        case VV1_f:
        
            animation_new ="spin";
            start_vv1();
            
        break;
        
        case VV1_p:
        
            animation_new ="spin";
            start_vv1();
            
        break;
        
        case VV2_f:
        
            animation_new ="idle";
            
        break;
        
        case VV2_p:
        
            animation_new ="idle";
            
        break;
        
        default:
        
                animation_new ="idle";
                
        break;
        
        case DD1_f:
        
            animation_new =objProgram.temp_animation;
            start_dd1();
        
        break;
        
        case DD1_p:
            
            animation_new =objProgram.temp_animation;
            start_dd1();
            
        break;
                
        case DD2_f:
        
            animation_new ="idle";
        
        break;
        
        case DD2_p:
        
            animation_new ="idle";
            
        break;
        
       case TT1_f:
            start_tt1()
            animation_new = "spin";
        break;
        
        case TT1_p:
        
            start_tt1();
            if (objProgram.temp_animation != 'idle' &amp;&amp; objProgram.temp_animation != 'spin')
            {
                animation_new = objProgram.temp_animation;
            }
            else
            {
                animation_new = "spin";
            }
            
        break;
        
        case SS1:
        
            animation_new ="idle";
            if y &gt; 4160
                with objSSBack.backWall { image_index=1; }
        break;
        
        case PP1:
        
            animation_new ="idle";
            
        break;
        
        case PP2:
        
            animation_new ="level_start";
            
        break;
        
        case MM1:
            
            objGameData.rings[0]=50;
            player_is_super_flying();
            facing=1;
        
        break;
    }
    else if other.spawn_id.tag &gt; 29 &amp;&amp; other.spawn_id.tag &lt; 40 {
    
        animation_new ="spin";
    
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// save level and play music
save_level();
stt_save_files();
set_zone_music(room);
    // if cutscene, let cutscene take over
    if objProgram.cutscene
    {
        objLevel.timer_enabled = false;
            //started = true;
    } else {
        play_music_intro(objMusic.musicIntroAsset,0);
    }
// create hud
instance_create(0, 0, objHud);
// set alarm to reset temp values
alarm[1]=1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="81">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///DEBUG: get a lot of rings
if (debug_mode) {
    player_get_rings(999);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
